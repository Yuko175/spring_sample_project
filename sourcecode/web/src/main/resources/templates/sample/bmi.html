<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="../../static/css/common.css" th:href="@{/css/common.css}" />
    <script src="../../static/js/jquery-3.6.0.min.js" th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script src="../../static/js/bootstrap.bundle.min.js" th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script src="../../static/js/common.js" th:src="@{/js/common.js}"></script>
    <title>BMIと適正体重</title>
    <script>
      //ボタンの挙動
      function bmiClearForm() {
        // 入力フォームをクリアする
        document.getElementById("bmiForm").action = "/sample/bmi";
        document.getElementById("bmiForm").submit();
      }

      function bmiCalculate() {
        // 計算する
        document.getElementById("bmiForm").action = "/sample/bmi/ans";
        document.getElementById("bmiForm").submit();
      }

      function backMenu() {
        // メニューに戻る
        window.location.href = "/sample";
      }
    </script>
  </head>
  <body>
    <form id="bmiForm" method="POST" th:action="@{/sample/bmi}" th:object="${bmiForm}">
      <input class="btn" type="button" value="　＜ 戻る　" onclick="backMenu()" />
      <div class="row justify-content-center">
        <div class="col-auto text-center">
          <br />
          <br />
          <h4>BMIと適正体重</h4>
          <br />
          身長　<input type="text" id="height" th:field="*{height}" style="text-align: center" />　cm<br />
          体重　<input type="text" id="weight" th:field="*{weight}" style="text-align: center" />　kg<br />
          <div th:if="${#fields.hasErrors('height')}" th:errors="*{height}"></div>
          <div th:if="${#fields.hasErrors('weight')}" th:errors="*{weight}"></div>
          <br />
          <br />
          <br />
          <input class="btn btn-primary" type="button" value="　計算　" onclick="bmiCalculate()" />
          <input class="btn btn-danger" type="button" value="　クリア　" onclick="bmiClearForm()" /><br />
          <br />
          <div id="resultFrame" th:if="${not #strings.isEmpty(bmiResult)}" class="text-center col">
            <table th:if="${not #strings.isEmpty(bmiResult)}" class="table text-center">
              <tr bgcolor="#d5eaff">
                <th>　肥満度(BMI)　</th>
                <th>　適正体重　</th>
                <th>　適正体重と比較　</th>
                <th>　BMI　</th>
              </tr>

              <!-- TODO：繰り返しをなくす！ -->
              <!-- 
              現状：3つの値が、以下のテストのように、出ます
              やること：1.分岐を各textの後ろに書く(冗長になるので考えてください)
              　　　　　2.単位と、比較の際の”＋”を足してください
              　　　　　3.kgの表示について。text増やしといてもいいよ
            -->

              <tr>
                <td>テスト</td>
                <td><text th:text="${bmiResult.adequateWeight}" /></td>
                <td><text th:text="${bmiResult.comparison}" /></td>
                <td><text th:text="${bmiResult.bmi}" /></td>
              </tr>

              <tr th:class="${bmi1 != null} ? 'text-danger border-danger border-danger h6' : ''">
                <td>低体重(~18.4)</td>
                <td><text th:text="${adequateWeight1}" /></td>
                <td><text th:text="${comparison1}" /></td>
                <td><text th:text="${bmi1}" /></td>
              </tr>
              <tr th:class="${bmi2 != null} ? 'text-danger border-danger h6' : ''">
                <td>普通体重(18.5~25)</td>
                <td><text th:text="${adequateWeight2}" /></td>
                <td><text th:text="${comparison2}" /></td>
                <td><text th:text="${bmi2}" /></td>
              </tr>
              <tr th:class="${bmi3 != null} ? 'text-danger border-danger h6' : ''">
                <td>肥満１(25~30)</td>
                <td><text th:text="${adequateWeight3}" /></td>
                <td><text th:text="${comparison3}" /></td>
                <td><text th:text="${bmi3}" /></td>
              </tr>
              <tr th:class="${bmi4 != null} ? 'text-danger border-danger h6' : ''">
                <td>肥満２(30~35)</td>
                <td><text th:text="${adequateWeight4}" /></td>
                <td><text th:text="${comparison4}" /></td>
                <td><text th:text="${bmi4}" /></td>
              </tr>
              <tr th:class="${bmi5 != null} ? 'text-danger border-danger h6' : ''">
                <td>肥満３(35~40)</td>
                <td><text th:text="${adequateWeight5}" /></td>
                <td><text th:text="${comparison5}" /></td>
                <td><text th:text="${bmi5}" /></td>
              </tr>
              <tr th:class="${bmi6 != null} ? 'text-danger border-danger h6' : ''">
                <td>肥満４(40~)　</td>
                <td><text th:text="${adequateWeight6}" /></td>
                <td><text th:text="${comparison6}" /></td>
                <td><text th:text="${bmi6}" /></td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </form>
  </body>
</html>
